var Le=Object.defineProperty;var Ie=(o,i,t)=>i in o?Le(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var f=(o,i,t)=>(Ie(o,typeof i!="symbol"?i+"":i,t),t);import{a as Ee,_ as De}from"./Tab.vue_vue_type_script_setup_true_lang.224a8ebb.js";import{_ as V,f as Z,E as ce,h as x,V as Ne,a$ as Re,g as D,p as K,dK as Me,ab as ze,dL as Ae,z as de,o as l,d,e as s,t as r,j as e,K as z,i as N,a as c,b3 as je,I as Ue,x as ue,$ as he,b1 as Ve,F as me,X as I,c as b,m as E,dg as U,dM as Te,dN as Be,aS as G,dO as ie,dP as qe,dQ as Oe,S as Pe,G as F,U as L,cr as ne,w as $,b2 as re,v as le,l as He,b as Ye,dR as Ge,a6 as Fe,C as Qe,a4 as Ke,a5 as Ze,a0 as We,dS as Je,dT as Xe,aU as et,Z as Q,dU as tt,dV as st,dW as ot}from"./index.86d7e4bf.js";import{B as it,_ as nt}from"./helpers.e65d4688.js";import{s as rt}from"./date.c9b8c764.js";import{a as lt,I as at}from"./trash.d63c0dc1.js";import{_ as ct}from"./Toggle.a4d00a99.js";import{_ as dt}from"./Logout.vue_vue_type_script_setup_true_lang.e66e75f0.js";import{I as ut}from"./user.fb3dc4ce.js";import{_ as ht}from"./Primary.vue_vue_type_script_setup_true_lang.d4d43153.js";import{o as mt,a as _t}from"./auth.15368646.js";import{d as pt}from"./Shortcode.89bb24b1.js";import{I as ft}from"./help-circle.a017c8ce.js";import"./ConfirmModal.vue_vue_type_script_setup_true_lang.8afd5bc1.js";const yt={};function vt(o,i){return null}const gt=V(yt,[["render",vt]]),bt={class:"block w-full my-6 border divide-y lg:flex lg:my-0 lg:border-0 lg:divide-y-0 lg:divide-x divide-dividerLight border-dividerLight"},St={class:"font-mono text-tiny table-box"},$t={class:"table-box"},xt={class:"justify-center table-box"},kt=Z({__name:"Shortcode",props:{shortcode:null},emits:["delete-shortcode"],setup(o,{emit:i}){const t=o,n=ce(),h=he(),m=y=>{i("delete-shortcode",y)},k={get:"text-green-500",post:"text-yellow-500",put:"text-blue-500",delete:"text-red-500",default:"text-gray-500"},T=x(),u=Ne(Re,1e3),R=D(()=>K(t.shortcode.request,JSON.parse,Me)),B=D(()=>K(k,Ae(R.value.method.toLowerCase()),ze(()=>k.default))),w=D(()=>rt(t.shortcode.createdOn)),C="https://hopp.sh",q=y=>{je(`${C}/r/${y}`),h.success(`${n("state.copied_to_clipboard")}`),u.value=Ue};return(y,v)=>{const M=ue,S=de("tippy");return l(),d("div",bt,[s("div",St,r(o.shortcode.id),1),s("div",{class:z(["table-box",e(B)])},r(e(R).method),3),s("div",$t,r(e(R).endpoint),1),s("div",{ref_key:"timeStampRef",ref:T,class:"table-box"},r(e(w)),513),s("div",xt,[N(c(M,{title:e(n)("action.open_workspace"),to:`${e(C)}/r/${o.shortcode.id}`,blank:"",icon:e(lt),class:"px-3 text-accent hover:text-accent"},null,8,["title","to","icon"]),[[S,{theme:"tooltip"}]]),N(c(M,{title:e(n)("action.copy"),color:"green",icon:e(u),class:"px-3",onClick:v[0]||(v[0]=O=>q(o.shortcode.id))},null,8,["title","icon"]),[[S,{theme:"tooltip"}]]),N(c(M,{title:e(n)("action.delete"),icon:e(at),color:"red",class:"px-3",onClick:v[1]||(v[1]=O=>m(o.shortcode.id))},null,8,["title","icon"]),[[S,{theme:"tooltip"}]])])])}}});const wt=V(kt,[["__scopeId","data-v-b60546f1"]]),Ct={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lt=s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[s("path",{d:"M12 3c-1.2 0-2.4.6-3 1.7A3.6 3.6 0 0 0 4.6 9c-1 .6-1.7 1.8-1.7 3s.7 2.4 1.7 3c-.3 1.2 0 2.5 1 3.4c.8.8 2.1 1.2 3.3 1c.6 1 1.8 1.6 3 1.6s2.4-.6 3-1.7c1.2.3 2.5 0 3.4-1c.8-.8 1.2-2 1-3.3c1-.6 1.6-1.8 1.6-3s-.6-2.4-1.7-3c.3-1.2 0-2.5-1-3.4a3.7 3.7 0 0 0-3.3-1c-.6-1-1.8-1.6-3-1.6Z"}),s("path",{d:"m9 12l2 2l4-4"})],-1),It=[Lt];function Et(o,i){return l(),d("svg",Ct,It)}const ae={name:"lucide-verified",render:Et},Dt=Z({props:{url:{type:String,default:""},alt:{type:String,default:"Profile picture"},indicator:{type:Boolean,default:!1},indicatorStyles:{type:String,default:"bg-green-500"},rounded:{type:String,default:"full"},size:{type:String,default:"5"},initial:{type:String,default:""}},methods:{toHex(o){let i=0;if(o.length===0)return i;for(let n=0;n<o.length;n++)i=o.charCodeAt(n)+((i<<5)-i),i=i&i;let t="#";for(let n=0;n<3;n++){const h=i>>n*8&255;t+=`00${h.toString(16)}`.slice(-2)}return t}}}),Nt=["src","alt"];function Rt(o,i,t,n,h,m){const k=ut;return l(),d("div",{tabindex:"0",class:z(["relative flex items-center justify-center cursor-pointer focus:outline-none focus-visible:ring focus-visible:ring-primaryDark",[`rounded-${o.rounded}`,`w-${o.size} h-${o.size}`]])},[o.url?(l(),d("img",{key:0,class:z(["absolute object-cover object-center transition bg-primaryDark",[`rounded-${o.rounded}`,`w-${o.size} h-${o.size}`]]),src:o.url,alt:o.alt,loading:"lazy"},null,10,Nt)):(l(),d("div",{key:1,class:z(["absolute flex items-center justify-center object-cover object-center transition bg-primaryDark text-accentContrast",[`rounded-${o.rounded}`,`w-${o.size} h-${o.size}`]]),style:Ve(`background-color: ${o.initial?o.toHex(o.initial):"#480000"}`)},[o.initial&&o.initial.charAt(0).toUpperCase()?(l(),d(me,{key:0},[I(r(o.initial.charAt(0).toUpperCase()),1)],64)):(l(),b(k,{key:1}))],6)),o.indicator?(l(),d("span",{key:2,class:z(["border-primary border-2 h-2.5 -top-0.5 -right-0.5 w-2.5 absolute",[`rounded-${o.rounded}`,o.indicatorStyles]])},null,2)):E("",!0)],2)}const Mt=V(Dt,[["render",Rt]]);class zt{constructor(i=!1){f(this,"error$");f(this,"loading$");f(this,"shortcodes$");f(this,"hasMoreShortcodes$");f(this,"isDispose");f(this,"myShortcodesCreated");f(this,"myShortcodesRevoked");f(this,"myShortcodesCreatedSub");f(this,"myShortcodesRevokedSub");this.error$=new U(null),this.loading$=new U(!1),this.shortcodes$=new U([]),this.hasMoreShortcodes$=new U(!0),this.isDispose=!0,this.myShortcodesCreated=null,this.myShortcodesRevoked=null,this.myShortcodesCreatedSub=null,this.myShortcodesRevokedSub=null,i||this.initialize()}unsubscribeSubscriptions(){var i,t,n,h;(i=this.myShortcodesCreated)==null||i.unsubscribe(),(t=this.myShortcodesRevoked)==null||t.unsubscribe(),(n=this.myShortcodesCreatedSub)==null||n.unsubscribe(),(h=this.myShortcodesRevokedSub)==null||h.unsubscribe()}initialize(){if(!this.isDispose)throw new Error("Adapter is already initialized");this.fetchList(),this.registerSubscriptions()}isInitialized(){return!this.isDispose}dispose(){if(this.isDispose)throw new Error("Adapter has been disposed");this.isDispose=!0,this.unsubscribeSubscriptions()}fetchList(){this.loadMore(!0)}async loadMore(i=!1){if(!this.hasMoreShortcodes$.value&&!i)return;this.loading$.next(!0);const t=this.shortcodes$.value.length>0?this.shortcodes$.value[this.shortcodes$.value.length-1].id:void 0,n=await Te({query:Be,variables:{cursor:t}});if(G(n))throw this.error$.next(n.left),console.error(n.left),this.loading$.next(!1),new Error(`Failed fetching short codes list: ${n.left}`);const h=n.right.myShortcodes;this.pushNewShortcodes(h),h.length!==it&&this.hasMoreShortcodes$.next(!1),this.loading$.next(!1)}pushNewShortcodes(i){const t=this.shortcodes$.value;t.push(...i),this.shortcodes$.next(t)}createShortcode(i){const t=this.shortcodes$.value;t.unshift(i),this.shortcodes$.next(t)}deleteShortcode(i){const t=this.shortcodes$.value.filter(({id:n})=>n!==i);this.shortcodes$.next(t)}registerSubscriptions(){const[i,t]=ie({query:qe});this.myShortcodesCreatedSub=t,this.myShortcodesCreated=i.subscribe(m=>{if(G(m))throw console.error(m.left),new Error(`Shortcode Create Error ${m.left}`);this.createShortcode(m.right.myShortcodesCreated)});const[n,h]=ie({query:Oe});this.myShortcodesRevokedSub=h,this.myShortcodesRevoked=n.subscribe(m=>{if(G(m))throw console.error(m.left),new Error(`Shortcode Delete Error ${m.left}`);this.deleteShortcode(m.right.myShortcodesRevoked.id)})}}const At={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},jt=s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[s("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),s("circle",{cx:"12",cy:"12",r:"3"})],-1),Ut=[jt];function Vt(o,i){return l(),d("svg",At,Ut)}const Tt={name:"lucide-settings",render:Vt},Bt=o=>(Ke("data-v-9cb65db9"),o=o(),Ze(),o),qt={class:"container"},Ot={class:"p-4"},Pt={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},Ht={key:1,class:"flex flex-col items-center justify-center"},Yt=["src","alt"],Gt={class:"pb-4 text-center text-secondaryLight"},Ft={key:2,class:"space-y-8"},Qt=Bt(()=>s("div",{class:"h-24 rounded bg-primaryLight -mb-11 md:h-32",style:{"background-image":"url('/images/cover.svg')"}},null,-1)),Kt={class:"flex flex-col justify-between px-4 space-y-8 md:flex-row"},Zt={class:"flex items-end"},Wt={class:"ml-4"},Jt={class:"heading"},Xt={class:"flex items-center text-secondaryLight"},es={class:"flex items-end space-x-2"},ts={class:"grid grid-cols-1"},ss={class:"p-4"},os={class:"font-semibold text-secondaryDark"},is={class:"my-1 text-secondaryLight"},ns={class:"py-4"},rs={for:"displayName"},ls=["onSubmit"],as=["placeholder"],cs={class:"py-4"},ds={for:"emailAddress"},us=["onSubmit"],hs=["placeholder"],ms={class:"p-4"},_s={class:"font-semibold text-secondaryDark"},ps={class:"my-1 text-secondaryLight"},fs={class:"py-4 space-y-4"},ys={class:"flex items-center"},vs={class:"flex items-center"},gs={class:"flex items-center"},bs={class:"p-4"},Ss={class:"font-semibold text-secondaryDark"},$s={class:"my-1 text-secondaryLight"},xs={class:"relative flex-shrink-0 py-4 overflow-x-auto"},ks={key:0,class:"flex flex-col items-center justify-center"},ws={class:"text-secondaryLight"},Cs={key:1,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},Ls=["src","alt"],Is={class:"mb-4 text-center"},Es={key:2},Ds={class:"hidden w-full border-t rounded-t bg-primaryLight lg:flex border-x border-dividerLight"},Ns={class:"flex w-full overflow-y-scroll"},Rs={class:"table-box"},Ms={class:"table-box"},zs={class:"table-box"},As={class:"table-box"},js={class:"justify-center table-box"},Us={class:"flex flex-col items-center justify-between w-full overflow-y-scroll border rounded max-h-sm lg:rounded-t-none lg:divide-y border-dividerLight divide-dividerLight"},Vs={key:0,class:"flex flex-col items-center py-3"},Ts={key:3,class:"flex flex-col items-center py-4"},Bs=Z({__name:"profile",setup(o){var ee,te;const i=x("sync"),t=ce(),n=he(),h=We();Pe({title:D(()=>t("navigation.profile"))});const m=F("syncCollections"),k=F("syncEnvironments"),T=F("syncHistory"),u=L(Je,null),R=L(Xe,null),B=D(()=>R.value?!u.value:!1),w=x((ee=u.value)==null?void 0:ee.displayName),C=x(!1);ne(()=>{var _;return w.value=(_=u.value)==null?void 0:_.displayName});const q=()=>{C.value=!0,tt(w.value).then(()=>{n.success(`${t("profile.updated")}`)}).catch(()=>{n.error(`${t("error.something_went_wrong")}`)}).finally(()=>{C.value=!1})},y=x((te=u.value)==null?void 0:te.email),v=x(!1);ne(()=>{var _;return y.value=(_=u.value)==null?void 0:_.email});const M=()=>{v.value=!0,st(y.value).then(()=>{n.success(`${t("profile.updated")}`)}).catch(()=>{n.error(`${t("error.something_went_wrong")}`)}).finally(()=>{v.value=!1})},S=x(!1),O=()=>{S.value=!0,Ge().then(()=>{n.success(`${t("profile.email_verification_mail")}`)}).catch(()=>{n.error(`${t("error.something_went_wrong")}`)}).finally(()=>{S.value=!1})},g=new zt(!0),W=L(g.loading$,!1),J=L(g.error$,null),A=L(g.shortcodes$,[]),_e=L(g.hasMoreShortcodes$,!0),j=D(()=>W.value&&A.value.length===0);mt(()=>{g.initialize()}),_t(_=>{if(_.event==="logout"&&g.isInitialized()){g.dispose();return}});const pe=_=>{K(pt(_),ot(a=>{n.error(`${X(a)}`)},()=>{n.success(`${t("shortcodes.deleted")}`)}))()},fe=()=>{g.loadMore()},X=_=>{if(_.type==="network_error")return t("error.network_error");switch(_.error){case"shortcode/not_found":return t("shortcodes.not_found");default:return t("error.something_went_wrong")}};return(_,a)=>{const P=Fe,ye=ht,se=Mt,ve=ae,H=ue,ge=Qe,be=dt,Y=ct,Se=wt,$e=nt,oe=Ee,xe=gt,ke=De,we=de("tippy");return l(),d("div",null,[s("div",qt,[s("div",Ot,[e(B)?(l(),d("div",Pt,[c(P,{class:"mb-4"})])):e(u)===null?(l(),d("div",Ht,[s("img",{src:`/images/states/${e(h).value}/login.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-24 h-24 my-4",alt:`${e(t)("empty.parameters")}`},null,8,Yt),s("p",Gt,r(e(t)("empty.profile")),1),c(ye,{label:e(t)("auth.login"),class:"mb-4",onClick:a[0]||(a[0]=p=>e(et)("modals.login.toggle"))},null,8,["label"])])):(l(),d("div",Ft,[Qt,s("div",Kt,[s("div",Zt,[e(u).photoURL?(l(),b(se,{key:0,url:e(u).photoURL,alt:e(u).displayName||e(t)("profile.default_displayname"),class:"ring-primary ring-4",size:"16",rounded:"lg"},null,8,["url","alt"])):(l(),b(se,{key:1,initial:e(u).displayName||e(u).email,rounded:"lg",size:"16",class:"ring-primary ring-4"},null,8,["initial"])),s("div",Wt,[s("label",Jt,r(e(u).displayName||e(t)("profile.default_hopp_displayname")),1),s("p",Xt,[I(r(e(u).email)+" ",1),e(u).emailVerified?N((l(),b(ve,{key:0,title:e(t)("settings.verified_email"),class:"ml-2 text-green-500 svg-icons cursor-help"},null,8,["title"])),[[we,{theme:"tooltip"}]]):(l(),b(H,{key:1,label:e(t)("settings.verify_email"),icon:e(ae),class:"px-1 py-0 ml-2",loading:S.value,onClick:O},null,8,["label","icon","loading"]))])])]),s("div",es,[s("div",null,[c(ge,{to:"/settings",icon:e(Tt),label:e(t)("profile.app_settings"),outline:""},null,8,["icon","label"])]),c(be,{outline:""})])]),c(ke,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=p=>i.value=p),styles:"sticky overflow-x-auto flex-shrink-0 bg-primary top-0 z-10","render-inactive-tabs":""},{default:$(()=>[c(oe,{id:"sync",label:e(t)("settings.account")},{default:$(()=>[s("div",ts,[s("section",ss,[s("h4",os,r(e(t)("settings.profile")),1),s("div",is,r(e(t)("settings.profile_description")),1),s("div",ns,[s("label",rs,r(e(t)("settings.profile_name")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:re(q,["prevent"])},[N(s("input",{id:"displayName","onUpdate:modelValue":a[1]||(a[1]=p=>w.value=p),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"text",autocomplete:"off",required:""},null,8,as),[[le,w.value]]),c(H,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:C.value},null,8,["label","loading"])],40,ls)]),s("div",cs,[s("label",ds,r(e(t)("settings.profile_email")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:re(M,["prevent"])},[N(s("input",{id:"emailAddress","onUpdate:modelValue":a[2]||(a[2]=p=>y.value=p),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"email",autocomplete:"off",required:""},null,8,hs),[[le,y.value]]),c(H,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:v.value},null,8,["label","loading"])],40,us)])]),s("section",ms,[s("h4",_s,r(e(t)("settings.sync")),1),s("div",ps,r(e(t)("settings.sync_description")),1),s("div",fs,[s("div",ys,[c(Y,{on:e(m),onChange:a[3]||(a[3]=p=>e(Q)("syncCollections"))},{default:$(()=>[I(r(e(t)("settings.sync_collections")),1)]),_:1},8,["on"])]),s("div",vs,[c(Y,{on:e(k),onChange:a[4]||(a[4]=p=>e(Q)("syncEnvironments"))},{default:$(()=>[I(r(e(t)("settings.sync_environments")),1)]),_:1},8,["on"])]),s("div",gs,[c(Y,{on:e(T),onChange:a[5]||(a[5]=p=>e(Q)("syncHistory"))},{default:$(()=>[I(r(e(t)("settings.sync_history")),1)]),_:1},8,["on"])])])]),s("section",bs,[s("h4",Ss,r(e(t)("settings.short_codes")),1),s("div",$s,r(e(t)("settings.short_codes_description")),1),s("div",xs,[e(j)?(l(),d("div",ks,[c(P,{class:"mb-4"}),s("span",ws,r(e(t)("state.loading")),1)])):E("",!0),!e(j)&&e(A).length===0?(l(),d("div",Cs,[s("img",{src:`/images/states/${e(h).value}/add_files.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-16 h-16 mb-8",alt:`${e(t)("empty.shortcodes")}`},null,8,Ls),s("span",Is,r(e(t)("empty.shortcodes")),1)])):e(j)?E("",!0):(l(),d("div",Es,[s("div",Ds,[s("div",Ns,[s("div",Rs,r(e(t)("shortcodes.short_code")),1),s("div",Ms,r(e(t)("shortcodes.method")),1),s("div",zs,r(e(t)("shortcodes.url")),1),s("div",As,r(e(t)("shortcodes.created_on")),1),s("div",js,r(e(t)("shortcodes.actions")),1)])]),s("div",Us,[(l(!0),d(me,null,He(e(A),(p,Ce)=>(l(),b(Se,{key:`shortcode-${Ce}`,shortcode:p,onDeleteShortcode:pe},null,8,["shortcode"]))),128)),e(_e)&&e(A).length>0?(l(),b($e,{key:0,onIntersecting:a[6]||(a[6]=p=>fe())},{default:$(()=>[e(W)?(l(),d("div",Vs,[c(P)])):E("",!0)]),_:1})):E("",!0)])])),!e(j)&&e(J)?(l(),d("div",Ts,[(l(),b(Ye(e(ft)),{class:"mb-4 svg-icons"})),I(" "+r(X(e(J))),1)])):E("",!0)])])])]),_:1},8,["label"]),c(oe,{id:"teams",label:e(t)("team.title")},{default:$(()=>[c(xe,{modal:!1,class:"p-4"})]),_:1},8,["label"])]),_:1},8,["modelValue"])]))])])])}}});const to=V(Bs,[["__scopeId","data-v-9cb65db9"]]);export{to as default};
//# sourceMappingURL=profile.9924d1f2.js.map
