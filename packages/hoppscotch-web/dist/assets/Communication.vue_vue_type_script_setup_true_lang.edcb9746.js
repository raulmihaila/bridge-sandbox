import{a as P,l as W,_ as Y,I as U,b as X}from"./json.53fc22d3.js";import{o as d,d as _,e as n,f as Z,E as G,h as i,V as Q,g as O,aZ as ee,b7 as te,K as C,a as c,i as r,v as ne,j as e,m as T,t as A,w as $,k as oe,F as se,l as le,c as S,X as ae,b2 as ie,p as ce,b8 as re,I as F,x as de,r as ue,z as pe,aO as me,$ as fe,C as ve}from"./index.86d7e4bf.js";import{I as _e}from"./help-circle.a017c8ce.js";import{u as ye,i as he,d as ke,a as xe}from"./utils.15e00fb8.js";import{c as ge,f as be}from"./TaskOption.1829462a.js";import{r as we}from"./files.413363e2.js";const Ce={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=n("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[n("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),n("circle",{cx:"5",cy:"19",r:"1"})],-1),Se=[$e];function Be(m,g){return d(),_("svg",Ce,Se)}const Ie={name:"lucide-rss",render:Be},Ne={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M22 2L11 13M22 2l-7 20l-4-9l-9-4l20-7z"},null,-1),je=[Me];function Le(m,g){return d(),_("svg",Ne,je)}const Oe={name:"lucide-send",render:Le},Te={class:"flex flex-col flex-1"},Ae=["placeholder"],Fe={class:"flex items-center"},Ee={class:"font-semibold truncate text-secondaryLight"},He={class:"select-wrapper"},Je=["onKeyup"],Ve={class:"flex"},qe={for:"payload"},Ye=Z({__name:"Communication",props:{showEventField:{type:Boolean,default:!1},eventFieldStyles:{type:String,default:""},stickyHeaderStyles:{type:String,default:""},isConnected:{type:Boolean,default:!1}},emits:["send-message"],setup(m,{emit:g}){const t=G(),b=fe(),B=i(null),y=i(!0),I=i(),N=i(),w=Q(P,1e3),h=i(!1),M={JSON:"application/ld+json",Raw:"text/plain"},E=Object.keys(M),s=i("JSON"),k=i(""),l=i(""),H=O(()=>M[s.value]),J=O(()=>he(s.value)?W:null);ye(I,l,ee({extendedEditorConfig:{lineWrapping:y,mode:H,placeholder:t("websocket.message").toString()},linter:J,completer:null,environmentHighlights:!0}));const j=()=>{h.value&&(l.value="",k.value="")},L=()=>{!l.value||(g("send-message",{eventName:k.value,message:l.value}),j())},V=async f=>{var x;const o=await ce((x=f.target.files)==null?void 0:x[0],be,ge(we))();re(o)?(l.value=o.value,b.success(`${t("state.file_imported")}`)):b.error(`${t("action.choose_file")}`)},q=()=>{try{const f=JSON.parse(l.value);l.value=JSON.stringify(f,null,2),w.value=F}catch(f){console.error(f),w.value=ke,b.error(`${t("error.json_prettify_invalid_body")}`)}};return te("request.send-cancel",L),(f,o)=>{const x=Ie,u=de,z=ve,K=ue("tippy"),R=Y,p=pe("tippy");return d(),_("div",Te,[m.showEventField?(d(),_("div",{key:0,class:C(["sticky z-10 flex items-center justify-center flex-shrink-0 overflow-x-auto border-b bg-primary border-dividerLight",m.eventFieldStyles])},[c(x,{class:"mx-4 svg-icons text-accentLight"}),r(n("input",{id:"event_name","onUpdate:modelValue":o[0]||(o[0]=a=>k.value=a),class:"w-full py-2 pr-4 truncate bg-primary",name:"event_name",placeholder:`${e(t)("socketio.event_name")}`,type:"text",autocomplete:"off"},null,8,Ae),[[ne,k.value]])],2)):T("",!0),n("div",{class:C(["sticky z-10 flex items-center justify-between flex-shrink-0 pl-4 overflow-x-auto border-b bg-primary border-dividerLight",m.stickyHeaderStyles])},[n("span",Fe,[n("label",Ee,A(e(t)("websocket.message")),1),c(K,{interactive:"",trigger:"click",theme:"popover","on-shown":()=>B.value.focus()},{content:$(({hide:a})=>[n("div",{ref_key:"tippyActions",ref:B,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:oe(v=>a(),["escape"])},[(d(!0),_(se,null,le(e(E),(v,D)=>(d(),S(z,{key:`contentTypeItem-${D}`,label:v,"info-icon":v===s.value?e(F):void 0,"active-info-icon":v===s.value,onClick:()=>{s.value=v,a()}},null,8,["label","info-icon","active-info-icon","onClick"]))),128))],40,Je)]),default:$(()=>[n("span",He,[c(u,{label:s.value||e(t)("state.none").toLowerCase(),class:"pr-8 ml-2 rounded-none"},null,8,["label"])])]),_:1},8,["on-shown"])]),n("div",Ve,[r(c(u,{title:`${e(t)("request.run")} <kbd>${e(me)()}</kbd><kbd>\u21A9</kbd>`,label:`${e(t)("action.send")}`,disabled:!l.value||!m.isConnected,icon:e(Oe),class:"rounded-none !text-accent !hover:text-accentDark",onClick:o[1]||(o[1]=a=>L())},null,8,["title","label","disabled","icon"]),[[p,{theme:"tooltip",delay:[500,20],allowHTML:!0}]]),r((d(),S(R,{on:h.value,class:"px-2",title:`${e(t)("mqtt.clear_input_on_send")}`,onChange:o[2]||(o[2]=a=>h.value=!h.value)},{default:$(()=>[ae(A(e(t)("mqtt.clear_input")),1)]),_:1},8,["on","title"])),[[p,{theme:"tooltip"}]]),r(c(u,{to:"https://docs.hoppscotch.io/realtime",blank:"",title:e(t)("app.wiki"),icon:e(_e)},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("action.clear"),icon:e(U),onClick:j},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("state.linewrap"),class:C({"!text-accent":y.value}),icon:e(xe),onClick:o[3]||(o[3]=ie(a=>y.value=!y.value,["prevent"]))},null,8,["title","class","icon"]),[[p,{theme:"tooltip"}]]),s.value&&s.value=="JSON"?r((d(),S(u,{key:0,title:e(t)("action.prettify"),icon:e(w),onClick:q},null,8,["title","icon"])),[[p,{theme:"tooltip"}]]):T("",!0),n("label",qe,[r(c(u,{title:e(t)("import.title"),icon:e(X),onClick:o[4]||(o[4]=a=>N.value.click())},null,8,["title","icon"]),[[p,{theme:"tooltip"}]])]),n("input",{ref_key:"payload",ref:N,class:"input",name:"payload",type:"file",onChange:V},null,544)])],2),n("div",{ref_key:"wsCommunicationBody",ref:I,class:"flex flex-col flex-1"},null,512)])}}});export{Ye as _,Ie as a};
//# sourceMappingURL=Communication.vue_vue_type_script_setup_true_lang.edcb9746.js.map
