var ke=Object.defineProperty;var Ce=(r,o,t)=>o in r?ke(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t;var f=(r,o,t)=>(Ce(r,typeof o!="symbol"?o+"":o,t),t);import{a as Le,_ as Ee}from"./Tab.vue_vue_type_script_setup_true_lang.997898e6.js";import{f as le,E as re,h as $,W as Ie,b6 as Ne,g as L,p as Z,dW as De,ae as Re,dX as Me,z as ae,o as l,d as p,e as s,t as n,j as e,N as Ae,i as E,a as c,aB as je,ba as Be,I as Te,x as ce,a5 as de,_ as he,ds as B,dY as Ve,dZ as ze,aZ as G,d_ as te,d$ as Ue,e0 as qe,U as Oe,G as P,V as C,cB as se,e1 as Ye,e2 as Ge,a$ as Pe,c as S,Y as D,e3 as He,w as x,b9 as oe,v as ie,Z as H,m as R,F as Ze,l as Fe,b as Qe,bg as We,a2 as Je,e4 as Ke,e5 as Xe,aG as et,e6 as tt,C as st,e7 as ot,e8 as it,a8 as nt,a9 as lt,e9 as rt,ea as at,eb as ct,ec as dt,ed as ht}from"./index.7e20fffb.js";import{B as ut,_ as _t}from"./helpers.35dc254f.js";import{s as mt,I as pt}from"./date.aba80cd9.js";import{_ as ft}from"./Toggle.ee6d6561.js";import{d as vt}from"./Shortcode.3be32996.js";const yt={class:"block w-full my-6 border divide-y lg:flex lg:my-0 lg:border-0 lg:divide-y-0 lg:divide-x divide-dividerLight border-dividerLight"},gt={class:"font-mono text-tiny table-box"},bt={class:"table-box"},St={class:"justify-center table-box"},xt=le({__name:"Shortcode",props:{shortcode:null},emits:["delete-shortcode"],setup(r,{emit:o}){const t=r,i=re(),_=de(),h=v=>{o("delete-shortcode",v)},M={get:"text-green-500",post:"text-yellow-500",put:"text-blue-500",delete:"text-red-500",default:"text-gray-500"},T=$(),d=Ie(Ne,1e3),I=L(()=>Z(t.shortcode.request,JSON.parse,De)),V=L(()=>Z(M,Me(I.value.method.toLowerCase()),Re(()=>M.default))),w=L(()=>mt(t.shortcode.createdOn)),k="https://hopp.sh",z=v=>{Be(`${k}/r/${v}`),_.success(`${i("state.copied_to_clipboard")}`),d.value=Te};return(v,y)=>{const N=ce,b=ae("tippy");return l(),p("div",yt,[s("div",gt,n(r.shortcode.id),1),s("div",{class:Ae(["table-box",e(V)])},n(e(I).method),3),s("div",bt,n(e(I).endpoint),1),s("div",{ref_key:"timeStampRef",ref:T,class:"table-box"},n(e(w)),513),s("div",St,[E(c(N,{title:e(i)("action.open_workspace"),to:`${e(k)}/r/${r.shortcode.id}`,blank:"",icon:e(pt),class:"px-3 text-accent hover:text-accent"},null,8,["title","to","icon"]),[[b,{theme:"tooltip"}]]),E(c(N,{title:e(i)("action.copy"),color:"green",icon:e(d),class:"px-3",onClick:y[0]||(y[0]=U=>z(r.shortcode.id))},null,8,["title","icon"]),[[b,{theme:"tooltip"}]]),E(c(N,{title:e(i)("action.delete"),icon:e(je),color:"red",class:"px-3",onClick:y[1]||(y[1]=U=>h(r.shortcode.id))},null,8,["title","icon"]),[[b,{theme:"tooltip"}]])])])}}});const $t=he(xt,[["__scopeId","data-v-b60546f1"]]),wt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},kt=s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[s("path",{d:"M12 3c-1.2 0-2.4.6-3 1.7A3.6 3.6 0 0 0 4.6 9c-1 .6-1.7 1.8-1.7 3s.7 2.4 1.7 3c-.3 1.2 0 2.5 1 3.4c.8.8 2.1 1.2 3.3 1c.6 1 1.8 1.6 3 1.6s2.4-.6 3-1.7c1.2.3 2.5 0 3.4-1c.8-.8 1.2-2 1-3.3c1-.6 1.6-1.8 1.6-3s-.6-2.4-1.7-3c.3-1.2 0-2.5-1-3.4a3.7 3.7 0 0 0-3.3-1c-.6-1-1.8-1.6-3-1.6Z"}),s("path",{d:"m9 12l2 2l4-4"})],-1),Ct=[kt];function Lt(r,o){return l(),p("svg",wt,Ct)}const ne={name:"lucide-verified",render:Lt};class Et{constructor(o=!1){f(this,"error$");f(this,"loading$");f(this,"shortcodes$");f(this,"hasMoreShortcodes$");f(this,"isDispose");f(this,"myShortcodesCreated");f(this,"myShortcodesRevoked");f(this,"myShortcodesCreatedSub");f(this,"myShortcodesRevokedSub");this.error$=new B(null),this.loading$=new B(!1),this.shortcodes$=new B([]),this.hasMoreShortcodes$=new B(!0),this.isDispose=!0,this.myShortcodesCreated=null,this.myShortcodesRevoked=null,this.myShortcodesCreatedSub=null,this.myShortcodesRevokedSub=null,o||this.initialize()}unsubscribeSubscriptions(){var o,t,i,_;(o=this.myShortcodesCreated)==null||o.unsubscribe(),(t=this.myShortcodesRevoked)==null||t.unsubscribe(),(i=this.myShortcodesCreatedSub)==null||i.unsubscribe(),(_=this.myShortcodesRevokedSub)==null||_.unsubscribe()}initialize(){if(!this.isDispose)throw new Error("Adapter is already initialized");this.fetchList(),this.registerSubscriptions()}isInitialized(){return!this.isDispose}dispose(){if(this.isDispose)throw new Error("Adapter has been disposed");this.isDispose=!0,this.unsubscribeSubscriptions()}fetchList(){this.loadMore(!0)}async loadMore(o=!1){if(!this.hasMoreShortcodes$.value&&!o)return;this.loading$.next(!0);const t=this.shortcodes$.value.length>0?this.shortcodes$.value[this.shortcodes$.value.length-1].id:void 0,i=await Ve({query:ze,variables:{cursor:t}});if(G(i))throw this.error$.next(i.left),console.error(i.left),this.loading$.next(!1),new Error(`Failed fetching short codes list: ${i.left}`);const _=i.right.myShortcodes;this.pushNewShortcodes(_),_.length!==ut&&this.hasMoreShortcodes$.next(!1),this.loading$.next(!1)}pushNewShortcodes(o){const t=this.shortcodes$.value;t.push(...o),this.shortcodes$.next(t)}createShortcode(o){const t=this.shortcodes$.value;t.unshift(o),this.shortcodes$.next(t)}deleteShortcode(o){const t=this.shortcodes$.value.filter(({id:i})=>i!==o);this.shortcodes$.next(t)}registerSubscriptions(){const[o,t]=te({query:Ue});this.myShortcodesCreatedSub=t,this.myShortcodesCreated=o.subscribe(h=>{if(G(h))throw console.error(h.left),new Error(`Shortcode Create Error ${h.left}`);this.createShortcode(h.right.myShortcodesCreated)});const[i,_]=te({query:qe});this.myShortcodesRevokedSub=_,this.myShortcodesRevoked=i.subscribe(h=>{if(G(h))throw console.error(h.left),new Error(`Shortcode Delete Error ${h.left}`);this.deleteShortcode(h.right.myShortcodesRevoked.id)})}}const It=r=>(nt("data-v-9cb65db9"),r=r(),lt(),r),Nt={class:"container"},Dt={class:"p-4"},Rt={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},Mt={key:1,class:"flex flex-col items-center justify-center"},At=["src","alt"],jt={class:"pb-4 text-center text-secondaryLight"},Bt={key:2,class:"space-y-8"},Tt=It(()=>s("div",{class:"h-24 rounded bg-primaryLight -mb-11 md:h-32",style:{"background-image":"url('/images/cover.svg')"}},null,-1)),Vt={class:"flex flex-col justify-between px-4 space-y-8 md:flex-row"},zt={class:"flex items-end"},Ut={class:"ml-4"},qt={class:"heading"},Ot={class:"flex items-center text-secondaryLight"},Yt={class:"flex items-end space-x-2"},Gt={class:"grid grid-cols-1"},Pt={class:"p-4"},Ht={class:"font-semibold text-secondaryDark"},Zt={class:"my-1 text-secondaryLight"},Ft={class:"py-4"},Qt={for:"displayName"},Wt=["onSubmit"],Jt=["placeholder"],Kt={class:"py-4"},Xt={for:"emailAddress"},es=["onSubmit"],ts=["placeholder"],ss={class:"p-4"},os={class:"font-semibold text-secondaryDark"},is={class:"my-1 text-secondaryLight"},ns={class:"py-4 space-y-4"},ls={class:"flex items-center"},rs={class:"flex items-center"},as={class:"flex items-center"},cs={class:"p-4"},ds={class:"font-semibold text-secondaryDark"},hs={class:"my-1 text-secondaryLight"},us={class:"relative flex-shrink-0 py-4 overflow-x-auto"},_s={key:0,class:"flex flex-col items-center justify-center"},ms={class:"text-secondaryLight"},ps={key:1,class:"flex flex-col items-center justify-center p-4 text-secondaryLight"},fs=["src","alt"],vs={class:"mb-4 text-center"},ys={key:2},gs={class:"hidden w-full border-t rounded-t bg-primaryLight lg:flex border-x border-dividerLight"},bs={class:"flex w-full overflow-y-scroll"},Ss={class:"table-box"},xs={class:"table-box"},$s={class:"table-box"},ws={class:"table-box"},ks={class:"justify-center table-box"},Cs={class:"flex flex-col items-center justify-between w-full overflow-y-scroll border rounded max-h-sm lg:rounded-t-none lg:divide-y border-dividerLight divide-dividerLight"},Ls={key:0,class:"flex flex-col items-center py-3"},Es={key:3,class:"flex flex-col items-center py-4"},Is=le({__name:"profile",setup(r){var J,K;const o=$("sync"),t=re(),i=de(),_=Je();Oe({title:L(()=>t("navigation.profile"))});const h=P("syncCollections"),M=P("syncEnvironments"),T=P("syncHistory"),d=C(rt,null),I=C(at,null),V=L(()=>I.value?!d.value:!1),w=$((J=d.value)==null?void 0:J.displayName),k=$(!1);se(()=>{var u;return w.value=(u=d.value)==null?void 0:u.displayName});const z=()=>{k.value=!0,ct(w.value).then(()=>{i.success(`${t("profile.updated")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{k.value=!1})},v=$((K=d.value)==null?void 0:K.email),y=$(!1);se(()=>{var u;return v.value=(u=d.value)==null?void 0:u.email});const N=()=>{y.value=!0,dt(v.value).then(()=>{i.success(`${t("profile.updated")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{y.value=!1})},b=$(!1),U=()=>{b.value=!0,Ke().then(()=>{i.success(`${t("profile.email_verification_mail")}`)}).catch(()=>{i.error(`${t("error.something_went_wrong")}`)}).finally(()=>{b.value=!1})},g=new Et(!0),F=C(g.loading$,!1),Q=C(g.error$,null),A=C(g.shortcodes$,[]),ue=C(g.hasMoreShortcodes$,!0),j=L(()=>F.value&&A.value.length===0);Ye(()=>{g.initialize()}),Ge(u=>{if(u.event==="logout"&&g.isInitialized()){g.dispose();return}});const _e=u=>{Z(vt(u),ht(a=>{i.error(`${W(a)}`)},()=>{i.success(`${t("shortcodes.deleted")}`)}))()},me=()=>{g.loadMore()},W=u=>{if(u.type==="network_error")return t("error.network_error");switch(u.error){case"shortcode/not_found":return t("shortcodes.not_found");default:return t("error.something_went_wrong")}};return(u,a)=>{const q=Xe,pe=et,X=tt,fe=ne,O=ce,ve=st,ye=ot,Y=ft,ge=$t,be=_t,ee=Le,Se=it,xe=Ee,$e=ae("tippy");return l(),p("div",null,[s("div",Nt,[s("div",Dt,[e(V)?(l(),p("div",Rt,[c(q,{class:"mb-4"})])):e(d)===null?(l(),p("div",Mt,[s("img",{src:`/images/states/${e(_).value}/login.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-24 h-24 my-4",alt:`${e(t)("empty.parameters")}`},null,8,At),s("p",jt,n(e(t)("empty.profile")),1),c(pe,{label:e(t)("auth.login"),class:"mb-4",onClick:a[0]||(a[0]=m=>e(Pe)("modals.login.toggle"))},null,8,["label"])])):(l(),p("div",Bt,[Tt,s("div",Vt,[s("div",zt,[e(d).photoURL?(l(),S(X,{key:0,url:e(d).photoURL,alt:e(d).displayName||e(t)("profile.default_displayname"),class:"ring-primary ring-4",size:"16",rounded:"lg"},null,8,["url","alt"])):(l(),S(X,{key:1,initial:e(d).displayName||e(d).email,rounded:"lg",size:"16",class:"ring-primary ring-4"},null,8,["initial"])),s("div",Ut,[s("label",qt,n(e(d).displayName||e(t)("profile.default_hopp_displayname")),1),s("p",Ot,[D(n(e(d).email)+" ",1),e(d).emailVerified?E((l(),S(fe,{key:0,title:e(t)("settings.verified_email"),class:"ml-2 text-green-500 svg-icons cursor-help"},null,8,["title"])),[[$e,{theme:"tooltip"}]]):(l(),S(O,{key:1,label:e(t)("settings.verify_email"),icon:e(ne),class:"px-1 py-0 ml-2",loading:b.value,onClick:U},null,8,["label","icon","loading"]))])])]),s("div",Yt,[s("div",null,[c(ve,{to:"/settings",icon:e(He),label:e(t)("profile.app_settings"),outline:""},null,8,["icon","label"])]),c(ye,{outline:""})])]),c(xe,{modelValue:o.value,"onUpdate:modelValue":a[7]||(a[7]=m=>o.value=m),styles:"sticky overflow-x-auto flex-shrink-0 bg-primary top-0 z-10","render-inactive-tabs":""},{default:x(()=>[c(ee,{id:"sync",label:e(t)("settings.account")},{default:x(()=>[s("div",Gt,[s("section",Pt,[s("h4",Ht,n(e(t)("settings.profile")),1),s("div",Zt,n(e(t)("settings.profile_description")),1),s("div",Ft,[s("label",Qt,n(e(t)("settings.profile_name")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:oe(z,["prevent"])},[E(s("input",{id:"displayName","onUpdate:modelValue":a[1]||(a[1]=m=>w.value=m),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"text",autocomplete:"off",required:""},null,8,Jt),[[ie,w.value]]),c(O,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:k.value},null,8,["label","loading"])],40,Wt)]),s("div",Kt,[s("label",Xt,n(e(t)("settings.profile_email")),1),s("form",{class:"flex mt-2 md:max-w-sm",onSubmit:oe(N,["prevent"])},[E(s("input",{id:"emailAddress","onUpdate:modelValue":a[2]||(a[2]=m=>v.value=m),class:"input",placeholder:`${e(t)("settings.profile_name")}`,type:"email",autocomplete:"off",required:""},null,8,ts),[[ie,v.value]]),c(O,{filled:"",outline:"",label:e(t)("action.save"),class:"ml-2 min-w-16",type:"submit",loading:y.value},null,8,["label","loading"])],40,es)])]),s("section",ss,[s("h4",os,n(e(t)("settings.sync")),1),s("div",is,n(e(t)("settings.sync_description")),1),s("div",ns,[s("div",ls,[c(Y,{on:e(h),onChange:a[3]||(a[3]=m=>e(H)("syncCollections"))},{default:x(()=>[D(n(e(t)("settings.sync_collections")),1)]),_:1},8,["on"])]),s("div",rs,[c(Y,{on:e(M),onChange:a[4]||(a[4]=m=>e(H)("syncEnvironments"))},{default:x(()=>[D(n(e(t)("settings.sync_environments")),1)]),_:1},8,["on"])]),s("div",as,[c(Y,{on:e(T),onChange:a[5]||(a[5]=m=>e(H)("syncHistory"))},{default:x(()=>[D(n(e(t)("settings.sync_history")),1)]),_:1},8,["on"])])])]),s("section",cs,[s("h4",ds,n(e(t)("settings.short_codes")),1),s("div",hs,n(e(t)("settings.short_codes_description")),1),s("div",us,[e(j)?(l(),p("div",_s,[c(q,{class:"mb-4"}),s("span",ms,n(e(t)("state.loading")),1)])):R("",!0),!e(j)&&e(A).length===0?(l(),p("div",ps,[s("img",{src:`/images/states/${e(_).value}/add_files.svg`,loading:"lazy",class:"inline-flex flex-col object-contain object-center w-16 h-16 mb-8",alt:`${e(t)("empty.shortcodes")}`},null,8,fs),s("span",vs,n(e(t)("empty.shortcodes")),1)])):e(j)?R("",!0):(l(),p("div",ys,[s("div",gs,[s("div",bs,[s("div",Ss,n(e(t)("shortcodes.short_code")),1),s("div",xs,n(e(t)("shortcodes.method")),1),s("div",$s,n(e(t)("shortcodes.url")),1),s("div",ws,n(e(t)("shortcodes.created_on")),1),s("div",ks,n(e(t)("shortcodes.actions")),1)])]),s("div",Cs,[(l(!0),p(Ze,null,Fe(e(A),(m,we)=>(l(),S(ge,{key:`shortcode-${we}`,shortcode:m,onDeleteShortcode:_e},null,8,["shortcode"]))),128)),e(ue)&&e(A).length>0?(l(),S(be,{key:0,onIntersecting:a[6]||(a[6]=m=>me())},{default:x(()=>[e(F)?(l(),p("div",Ls,[c(q)])):R("",!0)]),_:1})):R("",!0)])])),!e(j)&&e(Q)?(l(),p("div",Es,[(l(),S(Qe(e(We)),{class:"mb-4 svg-icons"})),D(" "+n(W(e(Q))),1)])):R("",!0)])])])]),_:1},8,["label"]),c(ee,{id:"teams",label:e(t)("team.title")},{default:x(()=>[c(Se,{modal:!1,class:"p-4"})]),_:1},8,["label"])]),_:1},8,["modelValue"])]))])])])}}});const Ts=he(Is,[["__scopeId","data-v-9cb65db9"]]);export{Ts as default};
//# sourceMappingURL=profile.b18f0f6c.js.map
