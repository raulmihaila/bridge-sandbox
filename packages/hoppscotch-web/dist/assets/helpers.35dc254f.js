import{f as m,h as c,ao as g,ap as q,o as C,d as v,a7 as _,p as i,ee as u,ef as r,eg as b,d2 as I,eh as D,ei as k,dY as a,ej as w,ek as y,el as B,em as E,aZ as d,en as h,eo as p,ep as G,dW as L}from"./index.7e20fffb.js";const O=m({__name:"Intersection",emits:["intersecting"],setup(s,{emit:e}){const t=c(),n=c();return g(()=>{t.value=new IntersectionObserver(([o])=>{o&&o.isIntersecting&&e("intersecting",o)}),t.value.observe(n.value)}),q(()=>{t.value.disconnect()}),(o,l)=>(C(),v("div",{ref_key:"container",ref:n},[_(o.$slots,"default")],512))}}),f=10,S=async s=>{const e=[];for(;;){const t=await a({query:E,variables:{collectionID:s,cursor:e.length>0?e[e.length-1]:void 0}});if(d(t))return h(t.left);if(e.push(...t.right.collection.children.map(n=>n.id)),t.right.collection.children.length!==f)break}return p(e)},T=async s=>{const e=[];for(;;){const t=await a({query:G,variables:{collectionID:s,cursor:e.length>0?e[e.length-1].id:void 0}});if(d(t))return h(t.left);if(e.push(...t.right.requestsInCollection.map(n=>({id:n.id,request:L(JSON.parse(n.request)),collectionID:s,title:n.title}))),t.right.requestsInCollection.length!==f)break}return p(e)},A=s=>i(y,r("title",()=>i(()=>a({query:w,variables:{collectionID:s}}),u(e=>e.collection.title))),r("children",()=>i(()=>S(s),b(I(k(A),D)))),r("requests",()=>()=>T(s)),u(({title:e,children:t,requests:n})=>({id:s,children:t,requests:n,title:e}))),R=s=>{var e,t,n,o;return B({name:s.title,folders:(t=(e=s.children)==null?void 0:e.map(R))!=null?t:[],requests:(o=(n=s.requests)==null?void 0:n.map(l=>l.request))!=null?o:[]})};export{f as B,O as _,A as g,R as t};
//# sourceMappingURL=helpers.35dc254f.js.map
