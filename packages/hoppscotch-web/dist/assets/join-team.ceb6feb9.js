import{ek as p,en as g,f as y,eo as k,U as h,g as D,ep as b,$ as I,E as j,eq as $,aU as w,er as L,p as T,es as S,a8 as C,dT as U,dS as q,_ as E,o as i,d as s,e as t,t as n,a,c as B,m as r,a6 as H,x as M}from"./index.86d7e4bf.js";import{_ as N}from"./Logout.vue_vue_type_script_setup_true_lang.e66e75f0.js";import{_ as R}from"./Primary.vue_vue_type_script_setup_true_lang.d4d43153.js";import{u as A}from"./graphql.e47d18d9.js";import{o as P}from"./auth.15368646.js";import"./ConfirmModal.vue_vue_type_script_setup_true_lang.8afd5bc1.js";const V=e=>p(g,{inviteID:e}),F=y({layout:"empty",setup(){const e=C(),o=A({query:k,variables:{inviteID:e.query.id},defer:!0});P(()=>{typeof e.query.id=="string"&&o.execute({inviteID:e.query.id})});const d=h(U,null),l=h(q,null),m=D(()=>d.value?!l.value:!1);return{E:b,inviteDetails:o,loadingCurrentUser:m,currentUser:l,toast:I(),t:j(),IconHome:$,invokeAction:w}},data(){return{invalidLink:!1,loading:!1,revokedLink:!1,inviteID:"",joinTeamSuccess:!1}},beforeMount(){L()},mounted(){typeof this.$route.query.id=="string"&&(this.inviteID=this.$route.query.id),this.invalidLink=!this.inviteID},methods:{joinTeam(){this.loading=!0,T(V(this.inviteID),S(()=>{this.loading=!1,this.toast.error(`${this.t("error.something_went_wrong")}`)},()=>{this.joinTeamSuccess=!0,this.loading=!1}))()},getErrorMessage(e){if(e.type==="network_error")return this.t("error.network_error");switch(e.error){case"team_invite/not_valid_viewer":return this.t("team.not_valid_viewer");case"team_invite/not_found":return this.t("team.not_found");case"team_invite/no_invite_found":return this.t("team.no_invite_found");case"team_invite/already_member":return this.t("team.already_member");case"team_invite/email_do_not_match":return this.t("team.email_do_not_match");default:return this.t("error.something_went_wrong")}}}}),G={class:"flex flex-col items-center justify-between min-h-screen"},O={key:0,class:"flex flex-col items-center justify-center flex-1"},Q=t("i",{class:"pb-2 opacity-75 material-icons"},"error_outline",-1),z={class:"text-center heading"},W={class:"mt-2 text-center"},J={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},K={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},X={class:"heading"},Y={class:"mt-2"},Z={key:3,class:"flex flex-col items-center justify-center flex-1 p-4"},x={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},ee={key:1},te={key:0,class:"flex flex-col items-center p-4"},ie=t("i",{class:"mb-4 material-icons"},"error_outline",-1),se={class:"flex flex-col items-center p-4 mt-8 border rounded border-dividerLight"},ne={class:"mb-4"},ae={class:"flex"},oe={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},re={class:"heading"},le={class:"mt-2 text-secondaryLight"},de={class:"mt-8"},me={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},ce={class:"heading"},ue={class:"mt-2 text-secondaryLight"},_e={class:"mt-8"},fe={class:"p-4"};function he(e,o,d,l,m,ve){var f;const c=H,u=R,v=N,_=M;return i(),s("div",G,[e.invalidLink?(i(),s("div",O,[Q,t("h1",z,n(e.t("team.invalid_invite_link")),1),t("p",W,n(e.t("team.invalid_invite_link_description")),1)])):e.loadingCurrentUser?(i(),s("div",J,[a(c)])):e.currentUser===null?(i(),s("div",K,[t("h1",X,n(e.t("team.login_to_continue")),1),t("p",Y,n(e.t("team.login_to_continue_description")),1),a(u,{label:e.t("auth.login_to_hoppscotch"),class:"mt-8",onClick:o[0]||(o[0]=pe=>e.invokeAction("modals.login.toggle"))},null,8,["label"])])):(i(),s("div",Z,[e.inviteDetails.loading?(i(),s("div",x,[a(c)])):(i(),s("div",ee,[!e.inviteDetails.loading&&e.E.isLeft(e.inviteDetails.data)?(i(),s("div",te,[ie,t("p",null,n(e.getErrorMessage(e.inviteDetails.data.left)),1),t("p",se,[t("span",ne,n(e.t("team.logout_and_try_again")),1),t("span",ae,[e.inviteDetails.data.left.type==="gql_error"?(i(),B(v,{key:0,outline:""})):r("",!0)])])])):r("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&!e.joinTeamSuccess?(i(),s("div",oe,[t("h1",re,n(e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",le,n(e.t("team.invited_to_team",{owner:(f=e.inviteDetails.data.right.teamInvitation.creator.displayName)!=null?f:e.inviteDetails.data.right.teamInvitation.creator.email,team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",de,[a(u,{label:e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name}),loading:e.loading,disabled:e.revokedLink,onClick:e.joinTeam},null,8,["label","loading","disabled","onClick"])])])):r("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&e.joinTeamSuccess?(i(),s("div",me,[t("h1",ce,n(e.t("team.joined_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",ue,n(e.t("team.joined_team_description",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",_e,[a(_,{to:"/",icon:e.IconHome,filled:"",label:e.t("app.home")},null,8,["icon","label"])])])):r("",!0)]))])),t("div",fe,[a(_,{class:"tracking-wide !font-bold !text-secondaryDark",label:"HOPPSCOTCH",to:"/"})])])}const je=E(F,[["render",he]]);export{je as default};
//# sourceMappingURL=join-team.ceb6feb9.js.map
